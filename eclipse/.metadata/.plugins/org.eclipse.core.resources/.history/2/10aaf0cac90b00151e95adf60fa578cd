package com.superzanti.serversync;

import java.nio.file.Paths;

import net.minecraftforge.client.event.GuiScreenEvent.ActionPerformedEvent;
import net.minecraftforge.client.event.GuiScreenEvent.DrawScreenEvent;
import cpw.mods.fml.client.FMLClientHandler;
import cpw.mods.fml.common.eventhandler.SubscribeEvent;
import cpw.mods.fml.common.gameevent.TickEvent.ClientTickEvent;
import cpw.mods.fml.relauncher.SideOnly;
import cpw.mods.fml.relauncher.Side;

@SideOnly(Side.CLIENT)
public class GuiScreenHandler {
	
	protected static boolean connectToServer = false;
	private static SyncClientConnection syncclientconnecction = new SyncClientConnection();
	protected static Thread thread = new Thread(syncclientconnecction);
	
	@SubscribeEvent
	public void onActionPerformedPre (ActionPerformedEvent.Post event) {
		
		if (event.button.id == 6001) {
			// log our absolute path so the user knows where to delete things
			ServerSyncRegistry.logger.info("Files may be downloaded to this location:");
			ServerSyncRegistry.logger.info(Paths.get(".").toAbsolutePath());
			
			try{
				client();
			} catch (Exception e) {
				ServerSyncRegistry.logger.error("Exception caught! - " + e);
			}
		}
		return;
	}
	
	private static void client() throws Exception {
		SyncClient c = new SyncClient();
		c.runClient();
		return;
	}
	
	@SubscribeEvent
	public void onEachTick(DrawScreenEvent.Pre event){
		
		if(syncclientconnecction.getFinished()){
			if(syncclientconnecction.getErrors()){
				
			} else if (syncclientconnecction.getUpdates()){
				
			} else {
				
			}
		}
		
	}

}
